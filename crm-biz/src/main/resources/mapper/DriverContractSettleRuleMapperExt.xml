<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.jaagro.crm.biz.mapper.DriverContractSettleRuleMapperExt">
    <select id="listDriverContractSettleRuleByCondition" resultMap="BaseResultMap" parameterType="java.lang.Integer">
        select
        <include refid="Base_Column_List"/>
        from driver_contract_settle_rule
        where enable=1
        <if test="truckTeamContractId!=null">
            truck_team_contract_id=#{truckTeamContractId}
        </if>
        <if test="truckTypeId!=null">
            truck_type_id=#{truckTypeId}
        </if>
        <if test="pricingMethodFlag == 1">
            pricing_method=#{pricingMethod}
        </if>
        <if test="pricingMethodFlag == 2">
            pricing_method in (2 ,3)
        </if>
        ORDER BY invalid_time desc LIMIT 1
    </select>
</mapper>